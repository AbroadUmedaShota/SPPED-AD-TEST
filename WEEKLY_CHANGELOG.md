# 変更履歴 (2025-07-22 〜 2026-02-03)

## 2026-02-03 (火)

- **SPEEDレビュー画面 (`speed-review.html`) のUI/UX改善**:
    - **設問選択UIの集約とプルダウン化**: 
        - 「現在選択中の設問」表示エリア全体をクリッカブルなドロップダウン風のデザインに変更しました。
        - エリア内に下三角アイコンを追加し、エリア全体が設問選択のトリガーであることを明確にしました。
        - 設問選択モーダルに、集計可能かを示すアイコン（`analytics` / `subject`）を追加しました。
        - 従来の「表示設問の変更」ボタンを削除し、UIをよりシンプルかつ直感的に集約しました。
- **詳細分析画面 (`graph-page.html`) のUI/UX改善**:
    - **フィルタUIの共通化**:
        - SPEEDレビュー画面と同様の「簡易検索」と「詳細検索」のタブ形式フィルタを導入し、時間指定込みの日時範囲選択が可能になりました。
        - 会期内の日程を素早く選べる対象日セレクターを追加しました。
    - **視覚的な一貫性の向上**:
        - 各グラフカードのタイトル横に、設問タイプに応じたアイコン（`analytics` / `subject`）を表示するようにしました。
- **フィルタリング機能の強化（日時範囲・時間指定）**:
    - **範囲選択フィルタの実装**: 日時フィルタを単一選択から範囲選択（Range）モードに変更しました。
    - **時間指定への対応**: フィルタに時間選択（Time Picker）を導入し、特定の日付の特定の時間帯に絞り込んだ精緻なデータ抽出を可能にしました。
    - **時間帯別グラフの表示モード切替**: グラフの横軸を「自動（投稿がある範囲のみ）」と「固定（9:00-19:00）」で切り替えられる機能を追加し、日次比較の利便性を向上させました。
    - **会期外の選択制限**: flatpickrのカレンダーにおいて、展示会会期外の日付をグレーアウトし、選択不可にするバリデーションを実装しました。
    - **サイドバー閉鎖操作の改善**: サイドバー展開時に表示される背景のグレー領域（オーバーレイ）をクリックすることで、サイドバーを閉じられるように仕様変更しました。
    - **デフォルト表示の最適化**: 初期表示では会期全体（全データ）を表示しつつ、ユーザーが必要に応じて即座に任意の期間で絞り込めるようにしました。
- **内部ロジックのクリーンアップ**:
    - UI変更に伴い不要となったイベントリスナーやボタン参照を削除し、コードの健全性を向上させました。
    - フィルタリングされたデータを取得する共通関数 `getFilteredData` を導入し、ロジックの再利用性を高めました。

## 2026-01-30 (金)

- **プレミアムプランのリリース目標更新（外部連携以外を6月末へ）**:
    - 外部連携（Slack/CRM等）以外の全プレミアム機能の目標時期を「6月末スコープ」に前倒しし、外部連携機能のみを「それ以降」の対象として設定しました。
    - 関連する全検討ドキュメントおよび議事録の記述を同期しました。
    - 対象ファイル:
        - `docs/product/requirements/01_premium_plan_features.md`
        - `docs/product/requirements/03_release_roadmap.md`
- **SPEEDレビュー画面 (`speed-review.html`) のUI/UX改善**:
    - **KPIダッシュボードのレイアウト最適化**:
        - 3カラム構成から「時間帯別グラフ（左）」と「属性・集計エリア（右）」の2カラム構成（幅比率 1:2）に変更し、視認性を向上させました。
        - 右カラム内で「属性内訳」と「データ集計」を横並びに配置し、一つのカード枠でグループ化することで情報のまとまりを強化しました。
        - 各グラフエリアの高さを縮小（`h-64`→`h-40`）し、ファーストビューの高さを抑えてコンパクトにしました。
    - **データ集計テーブルの表示改善**:
        - データ集計テーブルの内容を、KPIカードで現在選択中の設問のデータのみにフィルタリングして表示するように変更し、スクロールの必要性を低減しました。
    - **「グラフ化」ボタンの配置変更**:
        - サイドバー内にあった「グラフ化」ボタンを廃止し、データ集計エリアの右下に移動させました。
        - ボタンのスタイルを「表示設問の変更」ボタンと統一し、UIの一貫性を確保しました。
    - **カレンダーの視認性向上**:
        - ツールボックス内のカレンダー（Flatpickr）において、展示会会期（2026年1月4日～1月17日）の日付セルを薄い青色でハイライト表示するように機能を追加しました。
    - **詳細表示(インライン/モーダル)のデザイン調整**:
        - インライン展開時の「名刺（表面/裏面）」というテキスト見出しを削除し、画像表示エリアをすっきりさせました。
        - インラインおよび詳細モーダル内の「データ化進行中」ステータスの表示から枠線と背景色を削除し、アイコンとテキストのみのシンプルなデザインに変更しました。
    - **設問選択モーダルの改善**:
        - モーダルの表示幅を拡張 (`max-w-md` → `max-w-3xl`) し、長い設問文でも一覧性を損なわないように改善しました。
    - **ダミーデータの品質向上**:
        - 生成される回答データの期間を展示会会期（1/4～1/17）に限定しました。
        - ステータス（進行中/完了）の並び順をランダム化し、より自然なデータ分布を再現しました。
    - **対象ファイルの更新**:
        - `02_dashboard/speed-review.html`
        - `02_dashboard/src/speed-review.js`
        - `02_dashboard/src/ui/speedReviewRenderer.js`
        - `scripts/generate-speed-review-dummy-data.js`
- **SPEEDレビュー画面 (`speed-review.html`) のステータス統合**:
    - **「未データ化」ステータスの廃止と統合**:
        - 従来の「未データ化 (blank)」ステータスを廃止し、「データ化進行中 (processing)」と「完了 (completed)」の2種類に統合しました。これにより、未処理データも必ず「進行中」として扱われるようになり、運用ステータスがシンプル化されました。
        - フィルターメニューから「未データ化」を削除しました。
        - ダミーデータ生成ロジックを変更し、未データ化ステータスを生成しないように修正しました。
- **新規アカウント作成モーダル (`index.html`) のスクロール対応**:
    - **モーダル表示の改善**:
        - コンテンツ量が多くなった場合に画面からはみ出さないよう、最大高さを設定し、縦スクロールが可能になるようにスタイルを修正しました。
    - **対象ファイルの更新**:
        - `index.html`

## 2026-01-29 (木)

- **SPEEDレビュー画面：ダッシュボードからの設問選択機能を追加**:
    - **KPIカードのインタラクティブ化**:
        - アナリティクスダッシュボードの「現在選択中の設問」カードをクリック可能にし、ホバーエフェクトとドロップダウンアイコンを追加しました。
    - **設問選択モーダルの実装**:
        - カードクリック時に、アンケート内の全設問を一覧表示し、選択できる専用モーダル (`questionSelectModal.html`) を作成しました。
    - **UI/ロジックの連携**:
        - モーダルで設問を選択すると、メインテーブルのカラム、ヘッダー、およびダッシュボードの属性構成チャートが即座に同期して更新されるように実装しました。
    - **対象ファイルの更新**:
        - `02_dashboard/speed-review.html`
        - `02_dashboard/src/speed-review.js`
        - `02_dashboard/modals/questionSelectModal.html` (新規)
- **SPEEDレビュー画面の機能絞り込みとUI整理**:
    - **ツールボックスの簡素化**: 
        - ツールボックス内の「キーワード検索」および「回答で絞り込み」機能を削除し、フィルターを「日付・日時」のみに限定しました。
    - **アナリティクスダッシュボードの更新**:
        - KPIカードエリアから「最終回答」を削除し、カードレイアウトを最適化しました。
    - **JavaScriptロジックのクリーンアップ**:
        - 削除されたフィルター機能に関連する状態管理（`currentSearchTerm`, `currentAnswerFilter`）および処理ロジック（`handleSearch`, `updateAnswerFilterAvailability` 等）を完全に削除しました。
    - **対象ファイルの更新**:
        - `02_dashboard/speed-review.html`
        - `02_dashboard/src/speed-review.js`
- **SPEEDレビュー画面の仕様書更新（機能絞り込み）**:
    - **ドキュメントの整合性調整**:
        - ツールボックスの機能限定およびダッシュボードの簡素化に伴い、関連する仕様書を更新しました。
    - **対象ファイルの更新**:
        - `docs/product/specs/speed_review_requirements_current.md`
        - `docs/product/specs/06_speed_review.md`
        - `docs/service-consideration/2026-01-24_プレミアム機能_詳細分解一覧.md`
- **特定商取引法に基づく表示ページ (`specified-commercial-transactions.html`) の住所修正**:
    - 記載されている住所を「〒101-0032 東京都千代田区岩本町2-11-9 IT2ビル 8階」に修正しました。
    - 変更対象ファイル: `02_dashboard/specified-commercial-transactions.html`
- **個人情報保護方針 (`personal-data-protection-policy.html`) の新規作成とデザイン調整**:
    - 「個人情報保護方針」ページを新規作成し、他のダッシュボードページと統一されたデザインに調整しました。
    - 変更対象ファイル: `02_dashboard/personal-data-protection-policy.html`
- **ログイン/サインアップページ (`index.html`) のリンク修正**:
    - 新規アカウント作成モーダルおよびログインフォーム内の「個人情報保護方針」へのリンクを追加しました。
    - 一時的に修正した「プライバシーポリシー」のリンクを元の外部サイトに戻しました。
    - 変更対象ファイル: `index.html`
- **請求・課金ロジック定義書 (`01_billing_and_invoicing_logic.md`) の内容修正**:
    - ドキュメントの目的を明確にするため、追記内容を確定情報のみに絞り込み、ファイル名とタイトルも「請求・課金ロジック定義書」に修正しました。
    - 変更対象ファイル: `docs/product/requirements/01_billing_and_invoicing_logic.md`
- **プレミアムプラン加入ページ (`premium_signup.html`) のCTAボタン挙動変更**:
    - **ページ内スクロールの実装**:
        - ヘッダーおよびフッターの「今すぐプレミアムプランを始める/申し込む」ボタンをクリックした際、モーダルや「お問い合わせ」ではなく、同一ページ内の料金プランセクション (`#pricing`) へスムーズスクロールするように変更しました。
        - ユーザーの利便性を考慮し、スクロール時に料金プランセクションが画面中央に配置されるように調整しました。
        - 変更対象ファイル: `02_dashboard/premium_signup.html`
