/* Custom CSS Variables based on color_guideline */
:root {
    --color-base-background: #fff;
    --color-card-background: #fff;
    --color-sub-background: #fafafa;
    --color-accent-primary: #4B2E83;
    --color-accent-secondary: #2064A8;
    --color-border-divider: #e0e0e0;
    --color-error: #d32f2f;
    --color-text-heading: #222;
    --color-text-body: #444;
    --color-text-sub: #888;
    --color-text-disabled: #aaa;
}

/* Custom utility classes */
.gradient-primary-bg {
    background: linear-gradient(90deg, var(--color-accent-primary) 0%, var(--color-accent-secondary) 100%);
}
.text-speedad-primary { color: var(--color-accent-primary); }
.text-speedad-secondary { color: var(--color-accent-secondary); }
.hover\:text-speedad-primary:hover { color: var(--color-accent-primary); }
.hover\:text-speedad-secondary:hover { color: var(--color-accent-secondary); }
.focus\:border-speedad-secondary:focus { border-color: var(--color-accent-secondary); }
.focus\:ring-speedad-secondary:focus { ring-color: var(--color-accent-secondary); }
.shadow-soft { box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
.shadow-strong { box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2); }
.text-shadow-sm { text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2); }

/* Global font family */
body {
    font-family: "Noto Sans JP", "Inter", sans-serif;
    color: var(--color-text-body);
}
/* Prevent body scroll when mobile sidebar/modal is open */
body.overflow-hidden {
    overflow: hidden;
}

/* Custom scrollbar styles */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}
::-webkit-scrollbar-track {
    background: var(--color-sub-background);
}
::-webkit-scrollbar-thumb {
    background: #94a3b8; /* slate-400 */
    border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
    background: #64748b; /* slate-500 */
}

/* Sidebar specific styles */
.sidebar {
    width: 0; /* Default hidden for screens smaller than lg */
    transform: translateX(-100%);
    transition: width 0.3s ease-in-out, transform 0.3s ease-in-out;
    overflow-x: hidden; /* Hide labels by default */
    z-index: 40; /* Ensure it's above main content, below header */
    flex-shrink: 0; /* Prevent sidebar from shrinking */
}
/* Mobile: Sidebar opened by JS */
.sidebar.is-open-mobile {
    width: 16rem; /* Full width for mobile sidebar */
    transform: translateX(0);
}
/* Mobile: Ensure profile block and labels are always visible */
.sidebar.is-open-mobile .profile-block,
.sidebar.is-open-mobile .sidebar-nav-label {
    display: flex; /* Profile block as flex */
    opacity: 1;
    transform: translateX(0);
}

/* PC (LG screens: 1024px to 1279px) */
@media (min-width: 1024px) and (max-width: 1279px) {
    .sidebar {
        width: 16rem; /* Fixed expanded on LG */
        transform: translateX(0); /* Always visible */
    }
    /* Profile block and labels are always visible on LG */
    .sidebar .profile-block { display: flex; }
    .sidebar .sidebar-nav-label {
        opacity: 1;
        transform: translateX(0);
        transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
    }
}

/* PC (XL screens: 1280px and above) */
@media (min-width: 1280px) {
    .sidebar {
        width: 4rem; /* Default collapsed on XL */
        transform: translateX(0); /* Always visible */
    }
    .sidebar:hover {
        width: 16rem; /* Expand on hover */
    }

    /* Profile block visibility on XL */
    .sidebar .profile-block { display: none; } /* Default hidden on XL */
    .sidebar:hover .profile-block { display: flex; } /* Show on hover */

    /* Labels visibility on XL */
    .sidebar .sidebar-nav-label {
        opacity: 0; /* Default hidden on XL */
        transform: translateX(-8px);
        transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
    }
    .sidebar:hover .sidebar-nav-label {
        opacity: 1; /* Show on hover */
        transform: translateX(0);
        transition-delay: 150ms; /* Delay for smoother reveal */
    }
}

/* Main content and footer padding based on sidebar width */
/* IMPORTANT: These paddings are fixed values for each breakpoint to avoid content shift */
.main-content, .main-footer {
    padding-left: 0; /* Default for screens smaller than lg */
    transition: padding-left 0.3s ease-in-out; /* Smooth padding transition */
}

/* PC (LG screens: 1024px to 1279px) padding */
@media (min-width: 1024px) and (max-width: 1279px) {
    .main-content, .main-footer {
        padding-left: 16rem; /* Fixed for expanded sidebar on LG */
    }
}

/* PC (XL screens: 1280px and above) padding */
@media (min-width: 1280px) {
    .main-content, .main-footer {
        padding-left: 16rem; /* Fixed: Always expanded sidebar's full width for content */
    }
}

/* Mobile sidebar overlay */
.mobile-sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 39; /* Below sidebar, above content */
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none; /* Do not block clicks by default */
}
.mobile-sidebar-overlay.is-visible {
    opacity: 1;
    pointer-events: auto; /* Block clicks when visible */
}

/* Modal transitions */
.modal-overlay {
    transition: opacity 0.3s ease;
}
.modal-content-transition {
    transition: transform 0.3s ease, opacity 0.3s ease;
}
.modal-overlay[data-state="closed"] { opacity: 0; pointer-events: none; }
.modal-overlay[data-state="open"] { opacity: 1; }
.modal-content-transition[data-state="closed"] {
    transform: translateY(20px) scale(0.95);
    opacity: 0;
}
.modal-content-transition[data-state="open"] {
    transform: translateY(0) scale(1);
    opacity: 1;
}

/* Responsive Table */
@media (max-width: 768px) { /* md breakpoint for stacking table rows */
    .survey-table, .survey-table thead, .survey-table tbody, .survey-table th, .survey-table td, .survey-table tr {
        display: block;
    }

    .survey-table thead tr {
        position: absolute;
        top: -9999px;
        left: -9999px;
    }

    .survey-table tr {
        margin-bottom: 1rem;
        border: 1px solid var(--color-border-divider);
        border-radius: 0.8rem;
        overflow: hidden;
        box-shadow: var(--shadow-soft);
    }

    .survey-table td {
        border-bottom: 1px solid var(--color-border-divider);
        position: relative;
        padding-left: 50%;
        text-align: right;
    }

    .survey-table td:last-child {
        border-bottom: 0;
    }

    .survey-table td:before {
        content: attr(data-label);
        position: absolute;
        left: 6px;
        width: 45%;
        padding-right: 10px;
        white-space: nowrap;
        text-align: left;
        font-weight: bold;
        color: var(--color-text-sub);
        font-size: 0.9rem;
    }

    .actions-cell {
        justify-content: flex-end;
        display: flex;
        flex-wrap: wrap;
        gap: 0.25rem; /* Reduced gap for smaller buttons */
    }
}