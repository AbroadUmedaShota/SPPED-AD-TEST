## Webアプリ『SPEED AD』ユーザー権限仕様書（更新版）

### 1. 権限の概要
本アプリのアカウントは「利用者向けアカウント」と「管理者向けアカウント」に大別され、それぞれが担当する画面や業務に応じて権限が付与されます。

| アカウント種別 | 権限名 | 主な役割 | アクセス可能画面 |
| :--- | :--- | :--- | :--- |
| **利用者向け** | **User** | 自身が作成・招待されたアンケートの管理と回答。 | 利用者向け画面のみ |
| **管理者向け** | **Operator** | 名刺データの入力担当。データ入力に特化。 | 管理者向け画面／名刺入力画面 |
|  | **OperatorAdmin** | 名刺入力担当者の進捗・成果を確認するリーダー。 | 管理者向け画面／名刺入力・実績画面 |
|  | **Admin** | ユーザーサポートと業務全体の進捗・請求管理。 | 管理者向け画面全般 |
|  | **MasterAdmin** | Admin 権限に加え、管理者アカウントの作成と権限変更を実施。 | 管理者向け画面全般 |

---

### 2. 権限ごとの詳細

#### 2.1. User（一般利用者）
サービスの基本機能を利用するためのアカウントです。
* **アカウント作成:** 利用者本人がサービスサイトから新規登録します。
* **可能な操作:**
  * アカウントの新規作成・ログイン・ログアウト
  * アンケートの新規作成・編集中・回答結果の CSV ダウンロード
  * 有料プラン申し込み、名刺画像のアップロード、名刺データ化後ファイルのダウンロード
  * 同一企業・組織内のユーザー招待
* **操作制限:**
  * **アカウント情報の変更:** 契約開始後は請求情報との整合性を保つため変更不可。
  * **アンケートの変更:** 会期開始前日までは名称や会期を変更可能。会期開始後は変更不可。
  * **アンケートの削除:** 運用中および運用完了後は削除不可。

#### 2.2. Operator / OperatorAdmin（入力担当アカウント）

##### Operator（入力担当者）
名刺データ化作業を担当するスタッフ用アカウントです。
* 割り当てられた名刺画像の閲覧
* データ入力インターフェースへのアクセス

##### OperatorAdmin（入力チーム管理者）
Operator のリーダーとして進捗と成果を把握します。
* Operator の全機能を利用可能
* 入力結果の成否や報酬金額を確認できる管理画面へアクセス
* 所属スタッフの配属変更などの追加機能は今後拡張予定

#### 2.3. Admin（管理担当者）
ユーザーサポートや請求処理を含む運用全体を管轄するアカウントです。
* **ユーザー管理:** すべての `User` アカウントの検索・閲覧・内容修正
* **アンケート管理:**
  * 全アンケートの進捗確認とステータス変更
  * 緊急対応時には会期やプラン設定を含む内容変更が可能（`User` の制限に関わらず）
  * アンケートデータのダウンロード
  * データ化完了予定日の手動修正
* **請求管理:** 請求金額・請求日・入金日の更新
* **クーポン管理:** クーポンの発行と管理
* **制限:** 他の管理者アカウントの権限変更は不可

#### 2.4. MasterAdmin（最上位管理者）
Admin の権限に加え、システム全体の管理設定を行います。
* Admin の全操作が可能
* 管理者アカウントの新規作成、権限変更、無効化
* 管理者一覧から Operator／OperatorAdmin／Admin を任意に作成・更新

---

### 3. 権限管理フロー

#### 3.1. User アカウント（利用者向け）
1. **アカウント作成:** 利用者本人が Web サイトの新規登録フォームから作成。
2. **権限付与:** 登録と同時に自動的に `User` 権限が付与される。

#### 3.2. 管理者アカウント（管理者向け）
1. **作成依頼:** 業務上必要になった場合、`MasterAdmin` に作成を依頼。
2. **アカウント作成:** `MasterAdmin` が管理者画面から対象アカウントを作成し、Operator／OperatorAdmin／Admin のいずれかを付与。
3. **権限変更:** 役割変更が発生した場合、`MasterAdmin` が随時権限を更新。

---

### 4. 管理者画面におけるアンケート操作ルール
最新の運用ルールに基づき、管理者画面で実施できる操作を以下に整理します。Operator と OperatorAdmin は閲覧専用であり、アンケートの更新系操作にはアクセスできません。

| 区分 | 操作内容 | MasterAdmin | Admin | OperatorAdmin | Operator | User |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 管理者画面 | アカウント情報変更 | 常時可能 | 常時可能 | 権限なし | 権限なし | 会期前（開始前日まで）のみ |
| 管理者画面 | アンケート情報変更 | 常時可能 | 常時可能 | 権限なし | 権限なし | 会期前（開始前日まで）のみ |
| 管理者画面 | アンケート削除 | 常時可能 | 常時可能 | 権限なし | 権限なし | 会期前（開始前日まで）のみ |
| 管理者画面 | データ化完了予定日の変更 | 常時可能 | 常時可能 | 権限なし | 権限なし | - |

**ステータス変更時の補足**
- 会期開始日を前日以前に調整した場合、ステータスは「会期中」または「会期後」となり、User による編集・削除は不可になります。
- 会期開始日を当日に変更した場合、ステータスは「会期中」となり、User による編集・削除は不可になります。
- 会期開始日を翌日以降に変更した場合、ステータスは「会期前」となり、User による編集・削除が可能になります。
