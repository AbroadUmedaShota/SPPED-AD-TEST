# プレミアムプラン解約画面 要件定義書

## 1. 概要
本ドキュメントは、プレミアムプラン利用者が契約を解除するための「解約画面」および「解約完了画面」の機能要件、UX要件を定義する。

## 2. 解約フローの変更点（重要）
*   **即時解約・即時停止:** (2026-02-13 改定)
    *   解約手続き完了と同時に、プレミアムプランの全機能（データ無期限保存、画像DL、Excel出力など）が**即時停止**される。
    *   「月末まで利用可能」ではなく「手続き時点」でフリープラン（Standard）へダウングレードされる仕様とする。
    *   これに伴い、解約画面ではユーザーに対し「機能がすぐに使えなくなる」ことを強く警告し、誤操作を防ぐ。

## 3. 画面仕様：解約手続き画面 (`premium_cancel.html`)

### 3.1. 画面構成
*   **ヘッダー:** シンプルなタイトル「プレミアムプラン解約手続き」
*   **警告エリア:** 
    *   「解約すると**即時**にプレミアム機能が利用できなくなります」という警告を強調表示（赤枠・太字等）。
    *   「保存期間（無期限）が30日に短縮され、古いデータが閲覧できなくなる可能性がある」具体的リスクを明記。
    *   **有効期限表示:** 「現在のプラン有効期限（＝当月末日）」を表示し、今解約しても日割り返金はない旨、または権利放棄となる旨を示唆。
*   **解約理由アンケート（任意）:**
    *   ユーザーの声を拾うためのアンケートを設置するが、**回答は任意**とする（解約の障壁にしない）。
    *   選択肢（ラジオボタン）：
        *   価格が高い
        *   機能が使いにくい
        *   利用頻度が減った
        *   他社サービスへ移行
        *   その他（テキスト入力表示）
*   **アクションボタン:**
    *   **「解約する」ボタン:** 押下時に最終確認モーダルを表示。
    *   **「キャンセル（戻る）」ボタン:** ダッシュボードまたは前の画面へ戻る。

### 3.2. 最終確認モーダル
*   誤操作防止のため、ボタン押下後にモーダルを表示する。
*   「本当に解約しますか？」「この操作は取り消せません」といった最終確認を行う。
*   「解約を確定する」ボタン押下で解約APIをコールし、完了画面へ遷移する。

## 4. 画面仕様：解約完了画面 (`premium_cancel_complete.html`)

### 4.1. 画面構成
*   **完了メッセージ:** 「解約手続きが完了しました」「現在はフリープラン（Standard）です」を明確に表示。
*   **感謝の言葉:** 利用への感謝を述べ、再契約を歓迎するポジティブなトーンで締めくくる（ブランド毀損防止）。
*   **即時反映の通知:** 「プレミアム機能は停止しました」と改めて通知。
*   **アクション:**
    *   **「ダッシュボードへ戻る」:** ホーム画面 (`index.html`) へ遷移。
    *   **「アンケート作成へ」:** フリープラン機能で利用継続を促す。

## 5. データ処理要件
*   **プラン変更:** ユーザーの `planTier` を `premium` から `free` (または `standard`) へ即時更新。
*   **データ保持:** 
    *   解約時点でデータ削除は行わない（物理削除はしない）。
    *   ただし、フリープランの「保存期間（30日）」等の閲覧制限ロジックが即時適用されるため、ユーザーからは古いデータが見えなくなる挙動となる。
*   **請求:**
    *   当月分の請求は（日割りなしで）発生することを前提とする（規約・特定商取引法に基づく）。
