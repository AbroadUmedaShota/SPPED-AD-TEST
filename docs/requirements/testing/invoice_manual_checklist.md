# 請求画面 手動確認チェックリスト

最終更新日: 2025-10-12

## 1. 対象
- `02_dashboard/invoiceList.html`
- `02_dashboard/invoice-detail.html`
- `02_dashboard/invoice-print.html`

## 2. 事前準備
- `python -m http.server 8000` でリポジトリ直下を起動し、`http://localhost:8000/02_dashboard/index.html` からダッシュボードにアクセス。
- ブラウザは Chrome / Firefox の最新バージョンを推奨。
- ローカルストレージを一度クリアしてから確認を開始。

## 3. 一覧画面（INV-001）
1. 画面を開いた直後、直近の請求書が `請求月` 降順で表示される。
2. 各行に以下が表示されることを確認する。  
   - 契約プラン（課金タイプ・追加オプション含む）  
   - 請求金額（税込、3桁区切り）  
   - ステータスバッジ（未入金=黄 / 入金済=緑 / 延滞=赤 / 取消=灰）
3. 行末の `詳細` ボタン、もしくは行全体のクリックで詳細画面へ遷移すること。
4. JSON を一時的に空配列へ変更した場合、オーバーレイに「対象の請求書がありません。」が表示されること。
5. ネットワークをオフラインにしてリロードすると「請求データの取得に失敗しました。ページを再読み込みしてください。」が表示されること。

## 4. 詳細画面（INV-002）
1. URL パラメータ `id` に応じて請求書が表示されること。
2. ヘッダーにステータスバッジが表示され、取消ステータスでは印刷ボタンが非活性になること。
3. 請求情報ブロックで以下が表示されること。
   - 請求書番号 / 請求日 / 支払期限 / 対象期間  
   - 契約プラン（年額・月額の別）  
   - 追加オプション（件数や本数を含む）
4. 明細テーブルで `BASE` / `ADD_ON` / `ONE_TIME` / `CREDIT` ごとの小計行が表示されること。
5. 合計金額・消費税が JSON の値と一致すること。
6. 備考がある請求書では、備考セクションが表示されること（無い場合は非表示）。
7. `帳票ダウンロード` をクリックすると `seikyusyo_sample.xlsx` がダウンロードされること。
8. `印刷` ボタンで `invoice-print.html?id=...` が新規タブで開くこと。
9. 存在しない `id` を指定した場合、「対象の請求書が見つかりませんでした。」が表示されること。

## 5. 印刷画面（INV-003）
1. 詳細画面から遷移し、同一データが反映されていること。
2. ブラウザの印刷プレビューで A4 縦・余白既定の状態でレイアウトが破綻しないこと。
3. ステータスが取消の場合、印刷画面でも「取消」表記が表示されること。

## 6. 追加チェック
- ステータス毎に色のコントラストが WCAG AA 基準 (4.5:1) を満たすか目視確認。
- JavaScript コンソールにエラーが出ていないか確認。
- モバイル幅（`max-width: 768px`）でテーブルが横スクロール可能か確認。
