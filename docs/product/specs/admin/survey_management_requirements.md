# アンケート管理画面 要件定義書 (v1.0)

**文書バージョン:** 1.0  
**作成日:** 2025年10月4日  
**作成者:** [Gemini]

**改訂履歴**

| バージョン | 改訂日 | 改訂内容 | 改訂者 |
| :--- | :--- | :--- | :--- |
| 1.0 | 2025/10/04 | 初版作成 | [Gemini] |

---

## 1. 概要

### 1.1 目的
「アンケート管理」画面 (`03_admin/survey-management.html`) の稼働サマリ、検索フォーム、一覧テーブル、主要アクションの要件を定義する。

### 1.2 背景
複数のアンケート案件を横断管理するため、モックで提供されているサマリカード・検索フォーム・テーブルを正式要件として整理する。

### 1.3 スコープ
- 稼働サマリカード、検索条件フォーム、一覧テーブル。
- CSV出力・新規アンケート登録・一括変更・CSV取込などの操作。

---

## 2. 画面構成

### 2.1 ヘッダー
- H1「アンケート管理」と右側に CSV 出力、新規アンケート登録ボタンを配置する。【F:03_admin/survey-management.html†L24-L35】
- ヘッダー下に説明文としてデータソース (`data/core/surveys.json`) を明記する。【F:03_admin/survey-management.html†L26-L27】

### 2.2 稼働サマリ
- カード群で回答総数、名刺処理完了数、直近公開予定、プレミアムプラン件数を表示する。ステータスタグも併記。【F:03_admin/survey-management.html†L36-L64】

### 2.3 検索条件
- キーワード、ステータス、プラン、担当グループ、会期（開始/終了）、名刺処理状態、請求予定額の入力を提供する。【F:03_admin/survey-management.html†L65-L120】
- 検索・クリア・詳細フィルタボタンを下部に配置する。【F:03_admin/survey-management.html†L112-L120】

### 2.4 一覧テーブル
- 列: アンケートID、アンケート名称、担当グループ、会期、ステータス、プラン、回答数、名刺進捗、操作。【F:03_admin/survey-management.html†L121-L165】
- 操作列には詳細リンク（`survey-detail.html` へ遷移）、名刺DL、その他メニューを配置する。【F:03_admin/survey-management.html†L141-L165】
- テーブル上部にはステータス一括変更、CSV取込ボタンを並列配置する。【F:03_admin/survey-management.html†L121-L134】

---

## 3. 機能要件

### 3.1 データロード
- 画面ロード時に `surveys.json` を取得し、サマリ・検索候補・一覧を生成する。
- サマリカードは検索条件に応じて再計算する。

### 3.2 検索
- フォーム送信時に一覧をフィルタリングし、結果件数ゼロの場合は空表示メッセージを表示する。
- 詳細フィルタボタンはモーダルまたは追加条件領域を開く（将来対応）。

### 3.3 操作
- 「新規アンケート登録」は `/admin/surveys/new` へ遷移する。
- 「ステータス一括変更」「CSV取込」は対象行をチェックボックスで選択できる前提で、モーダルを開く。
- 行の「詳細」リンクは `surveyId` パラメータ付きで詳細画面へ遷移する。

---

## 4. データモデル（例）
```json
{
  "summary": {
    "running": 1,
    "preparing": 1,
    "draft": 1,
    "finished": 1,
    "responses": 514,
    "businessCardComplete": 315,
    "nextLaunch": "2025-07-25"
  },
  "filters": {
    "keyword": "展示会",
    "status": "running",
    "plan": "standard",
    "group": "sales",
    "startDate": "2025-07-01",
    "endDate": "2025-07-31",
    "cardStatus": "enabled",
    "billingRange": "lt80"
  },
  "surveys": [
    {
      "id": "sv_0001_25022",
      "name": "サンプルアンケート 1",
      "group": "営業部",
      "period": "2025/07/01 - 2025/07/31",
      "status": "実施中",
      "plan": "Standard",
      "responses": 125,
      "cardProgress": "110 / 120件"
    }
  ]
}
```

---

## 5. 非機能要件
- 検索結果の描画は 2 秒以内。
- テーブルはレスポンシブ対応し、モバイルでは横スクロールを許可する。
- ステータスタグは視認性を高めるため色分けとアイコンを使用する。

---

## 6. 将来検討事項
- チェックボックスによる一括操作と、進捗グラフ表示。
- サマリカードのカスタム指標設定。
- アンケートテンプレートの複製・公開予約機能。
