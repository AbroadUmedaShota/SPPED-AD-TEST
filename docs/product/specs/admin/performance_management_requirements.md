# 実績管理画面 要件定義書 (v1.0)

**文書バージョン:** 1.0  
**作成日:** 2025年10月4日  
**作成者:** [Gemini]

**改訂履歴**

| バージョン | 改訂日 | 改訂内容 | 改訂者 |
| :--- | :--- | :--- | :--- |
| 1.0 | 2025/10/04 | 初版作成 | [Gemini] |

---

## 1. 概要

### 1.1 目的
「実績管理」画面 (`03_admin/performance-management.html`) の集計条件、グラフ表示、オペレーター別実績テーブルの要件を定義する。

### 1.2 背景
オペレーターのパフォーマンスを分析し、改善点を把握するために期間・指標を切り替えながら集計結果を閲覧する画面が必要。モックで表現されている機能を要件化する。

### 1.3 スコープ
- 集計条件フォーム、グラフ領域、オペレーター別実績テーブル。
- 指標設定ボタン、エクスポート導線。

---

## 2. 画面構成

### 2.1 ヘッダー
- H1「実績管理」と右側に「指標設定」ボタンを配置する。【F:03_admin/performance-management.html†L23-L31】

### 2.2 集計条件
- `bg-surface` カード内に開始日・終了日・グループ・指標を選択するフォームを配置し、デフォルト値を設定する。【F:03_admin/performance-management.html†L33-L49】

### 2.3 グラフセクション
- 左カラムに「処理件数の推移」、右カラムに「一致率の推移」を配置し、モックではプレースホルダグラフだが本番では Chart.js 等で描画する。【F:03_admin/performance-management.html†L50-L77】
- 各グラフ右上に CSV/PDF 出力ボタンを提供する。

### 2.4 オペレーター別実績
- テーブル列: オペレーター、処理件数、一致率、平均処理時間、エスカレーション、詳細。【F:03_admin/performance-management.html†L78-L110】
- 行ホバー時に背景色を変更し、「ドリルダウン」ボタンから個別詳細モーダルを呼び出す想定。

---

## 3. 機能要件

### 3.1 集計条件変更
- フォーム値変更時にAPIを再呼び出し、グラフとテーブルを更新する。
- 指標プルダウンで選択した値に応じてグラフのY軸・凡例を切り替える。

### 3.2 出力
- グラフセクションのCSV/PDFボタンは直近の集計結果をダウンロードする。
- オペレーター別テーブルもCSV出力を将来オプションとして検討する。

### 3.3 ドリルダウン
- 「ドリルダウン」ボタンで対象オペレーターの詳細（1日単位の処理件数など）をモーダル表示する。初期リリースではトースト通知で対応する。

---

## 4. データモデル（例）
```json
{
  "filters": {
    "startDate": "2025-09-01",
    "endDate": "2025-09-30",
    "group": "all",
    "metric": "count"
  },
  "charts": {
    "counts": {
      "labels": ["09/01", "09/02"],
      "values": [120, 132]
    },
    "accuracy": {
      "labels": ["09/01", "09/02"],
      "values": [0.972, 0.978]
    }
  },
  "operators": [
    {
      "id": "op_001",
      "name": "山田 向日葵",
      "count": 420,
      "accuracy": 0.984,
      "avgTime": "4m12s",
      "escalations": 1
    }
  ]
}
```

---

## 5. 非機能要件
- 集計APIのレスポンスは 5 秒以内。
- グラフはレスポンシブ対応とし、モバイルでは縦積みに配置する。
- テーブルはスクリーンリーダー対応のため `aria-label` を付与し、数値セルには `data-value` 属性を付与する。

---

## 6. 将来検討事項
- KPIカードの追加（平均稼働時間、出勤率など）。
- グラフの比較モード（前月比・前年同月比）。
- エクスポート用のスケジュール配信機能。
