# オペレーター管理画面 要件定義書 (v1.0)

**文書バージョン:** 1.0  
**作成日:** 2025年10月4日  
**作成者:** [Gemini]

**改訂履歴**

| バージョン | 改訂日 | 改訂内容 | 改訂者 |
| :--- | :--- | :--- | :--- |
| 1.0 | 2025/10/04 | 初版作成 | [Gemini] |

---

## 1. 概要

### 1.1 目的
「オペレーター管理」画面 (`03_admin/operator-management.html`) の機能を定義し、オペレーターの稼働状況把握・招待・履歴確認に必要なUIを明文化する。

### 1.2 背景
BPOセンターで複数のオペレーターが同時稼働するため、状況サマリと一覧操作を行う画面が必要。モックに含まれる構造を正式要件として整理する。

### 1.3 スコープ
- KPIカード、オペレーター一覧テーブル、検索／フィルタ導線。
- 新規招待フォーム、最近の操作履歴セクション。
- 主要ボタンの動作およびアクセシビリティ要件。

---

## 2. 画面構成

### 2.1 ヘッダー
- H1「オペレーター管理」と右側に `bg-secondary` の「オペレーター招待」ボタンを表示する。【F:03_admin/operator-management.html†L23-L29】

### 2.2 KPIカード
- 4枚のカード「稼働中」「待機中」「平均処理件数/日」「精度 (一致率)」を1列〜4列のレスポンシブグリッドで表示し、数値を `text-display-small` で強調する。【F:03_admin/operator-management.html†L31-L46】

### 2.3 オペレーター一覧
- 「オペレーター一覧」カード内に検索フィールドとフィルタボタンを配置し、テーブルを提供する。【F:03_admin/operator-management.html†L47-L87】
- テーブル列: 氏名、メール、権限、現在タスク、本日完了、精度、状態、操作。状態はラベル表示、操作列に詳細/稼働停止/割当/削除などを設置する。【F:03_admin/operator-management.html†L88-L133】

### 2.4 サブセクション
- 左カラム: 「新規招待」フォーム（メール、権限、グループ）を提供し、「招待メール送信」ボタンで送信。【F:03_admin/operator-management.html†L134-L168】
- 右カラム: 「最近の操作履歴」リストで日時・操作者・内容を時系列表示。【F:03_admin/operator-management.html†L169-L183】

---

## 3. 機能要件

### 3.1 検索/フィルタ
- 検索は氏名・メールの部分一致。フィルタボタンはモーダル開閉を想定する。
- テーブルは並べ替えを後続対応とし、現段階では検索のみで絞り込む。

### 3.2 招待フロー
- フォーム送信で招待メールを送付し、結果をトースト表示。成功時はフォームをクリアする。
- グループ選択は既存の稼働グループ一覧を取得して表示する。

### 3.3 状態更新
- 操作列の「稼働停止」「割当」「削除」などは確認モーダルを経由してAPI呼び出しを行い、行データを更新する。
- 状態タグの色は `稼働中=success`、`待機中=warning` など、`admin-style.css` のトークンに合わせる。

### 3.4 操作履歴
- 最近の操作履歴は直近10件まで表示し、それ以上は「もっと見る」ボタン（将来対応）を検討する。

---

## 4. データモデル（例）
```json
{
  "summary": {
    "active": 48,
    "idle": 12,
    "avgPerDay": 36.4,
    "accuracy": 0.973
  },
  "operators": [
    {
      "id": "op_001",
      "name": "山田 向日葵",
      "email": "h.yamada@example.com",
      "role": "照合兼任",
      "currentTask": "展示会2025春 #1241",
      "todayCompleted": 18,
      "accuracy": 0.984,
      "status": "active"
    }
  ],
  "invite": {
    "email": "",
    "role": "入力専任",
    "group": "展示会2025春"
  },
  "activityLogs": [
    {
      "timestamp": "2025-09-30T09:15:00+09:00",
      "actor": "田中 太郎",
      "action": "山田 向日葵の権限を照合兼任に変更"
    }
  ]
}
```

---

## 5. 非機能要件
- 検索レスポンスは 1 秒以内を目標にする。
- フォームおよびテーブルはキーボード操作で利用可能とし、`aria-label` を適切に付与する。
- KPIカードは視覚的強調のためアイコンを使用するが、色弱利用者向けに数値とテキストで意味を伝える。

---

## 6. 将来検討事項
- 稼働状況のリアルタイム更新（WebSocket 連携）。
- シフト計画管理や休暇申請フローとの連携。
- CSV インポートによる一括招待機能。
