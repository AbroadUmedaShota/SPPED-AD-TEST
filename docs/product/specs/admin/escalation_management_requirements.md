# エスカレーション対応画面 要件定義書 (v1.0)

**文書バージョン:** 1.0  
**作成日:** 2025年10月4日  
**作成者:** [Gemini]

**改訂履歴**

| バージョン | 改訂日 | 改訂内容 | 改訂者 |
| :--- | :--- | :--- | :--- |
| 1.0 | 2025/10/04 | 初版作成 | [Gemini] |

---

## 1. 概要

### 1.1 目的
データ入力・照合業務で発生したエスカレーションを管理する「エスカレーション対応」画面 (`03_admin/escalations.html`) の要件を定義する。

### 1.2 背景
業務のボトルネック解消にはエスカレーションの種別・優先度・担当状況を一覧できる画面が必要。モックで提供されているカード・一覧・詳細パネルを仕様化する。

### 1.3 スコープ
- エスカレーション状況サマリ、一覧テーブル、詳細パネル、対応履歴。
- 通知設定、最新化、CSV出力などのアクション。

---

## 2. 画面構成

### 2.1 ヘッダー
- H1「エスカレーション対応」と右側に「通知設定」ボタンを配置する。【F:03_admin/escalations.html†L23-L31】

### 2.2 状況サマリ
- 4枚のカードで画像不備・言語不一致・情報不足・対応完了（今週）の件数を表示する。【F:03_admin/escalations.html†L33-L57】
- 上部に最新化・CSV出力ボタンを配置する。【F:03_admin/escalations.html†L33-L45】

### 2.3 エスカレーション一覧
- テーブル列: 発生元、種別、受付日時、優先度、担当、状態、操作。【F:03_admin/escalations.html†L58-L104】
- チェックボックスで「未対応のみ」「自分の担当」をフィルタできるようにする。【F:03_admin/escalations.html†L58-L72】

### 2.4 詳細・履歴
- 左カラムに詳細パネル（案件ID、種別、発生元、受付、詳細、アクションボタン）を配置する。【F:03_admin/escalations.html†L105-L139】
- 右カラムに対応履歴を時系列で表示する。【F:03_admin/escalations.html†L140-L157】

---

## 3. 機能要件

### 3.1 データ更新
- 「最新化」ボタンで最新データを取得し、サマリ・一覧・詳細を再描画する。
- CSV出力は現在のフィルタ条件を適用した結果を出力する。

### 3.2 フィルタリング
- 「未対応のみ」は状態が未対応/対応中のレコードのみ表示。
- 「自分の担当」はログインユーザーの担当列と一致するレコードのみ表示。

### 3.3 詳細パネル操作
- 「対応結果登録」で対応ステータス・コメントを入力するモーダルを開く。
- 「再割当」で担当者を変更し、履歴へ記録する。
- 「クローズ」で状態を完了に更新する。

### 3.4 通知設定
- 「通知設定」ボタンは通知ルール設定モーダルを開く。初期リリースではダミー画面でも可。

---

## 4. データモデル（例）
```json
{
  "summary": {
    "imageIssue": 8,
    "languageMismatch": 5,
    "missingInfo": 3,
    "resolvedThisWeek": 12
  },
  "filters": {
    "unresolvedOnly": true,
    "myAssignments": false
  },
  "tickets": [
    {
      "id": "1241",
      "source": "入力",
      "type": "画像不備",
      "receivedAt": "2025-09-30T11:12:00+09:00",
      "priority": "high",
      "assignee": "田中 太郎",
      "status": "open"
    }
  ],
  "selected": {
    "id": "1241",
    "details": "OCR結果と手入力値の差分が大きく、画像の再スキャンが必要です。",
    "history": [
      {
        "timestamp": "2025-09-30T11:20:00+09:00",
        "actor": "田中 太郎",
        "message": "オペレーターへ追加情報を依頼"
      }
    ]
  }
}
```

---

## 5. 非機能要件
- データ再取得は 2 秒以内を目標とする。
- 優先度・状態の色分けはテキスト併記でアクセシビリティに配慮する。
- 詳細パネルはキーボード操作で操作できるようボタンのタブ順を制御する。

---

## 6. 将来検討事項
- SLA指標（対応までの時間、完了までの時間）のチャート表示。
- Slack/Teams連携による通知自動化。
- エスカレーション分類ルールの設定画面追加。
