# 利用者アカウント管理画面 要件定義書 (v1.0)

**文書バージョン:** 1.0  
**作成日:** 2025年10月4日  
**作成者:** [Gemini]

**改訂履歴**

| バージョン | 改訂日 | 改訂内容 | 改訂者 |
| :--- | :--- | :--- | :--- |
| 1.0 | 2025/10/04 | 初版作成 | [Gemini] |

---

## 1. 概要

### 1.1 目的
本書は管理者が利用者アカウントの検索・閲覧・編集を行う「利用者アカウント管理」画面 (`03_admin/user-management.html`) の要件を定義する。検索条件の保存や一覧テーブル、招待導線などを明文化し、運用チームがUI/機能を統一的に実装できるようにする。

### 1.2 背景
既存のモックには詳細な検索フォームや一覧テーブルが用意されているが、どの要素が必須か・どのデータを扱うかが明文化されていなかった。サービス画面同様、画面単位の要件定義を管理するため本書を整備する。

### 1.3 スコープ
- 検索条件フォーム・詳細フィルタ・保存済み条件ボタン。
- 利用者一覧テーブルとCSV出力、新規アカウント作成導線。
- 画面ヘッダー、パンくず、主要ボタンのインタラクション要件。

---

## 2. 画面構成

### 2.1 共通レイアウト
- 共通ヘッダー／サイドバー／フッター、モバイルオーバーレイの読み込み方法はダッシュボードと同一とする。【F:03_admin/user-management.html†L16-L33】
- タイトル行には H1「利用者アカウント管理」と右側に「新規ユーザー招待」ボタンを配置し、`bg-secondary` トークンで強調する。【F:03_admin/user-management.html†L23-L28】

### 2.2 検索条件セクション
- `bg-surface` のカード内に「検索条件」タイトルと「保存済み条件」ボタンを設置する。【F:03_admin/user-management.html†L30-L40】
- フォーム要素は3列グリッドで配置し、以下の入力を提供する。【F:03_admin/user-management.html†L41-L78】
  - キーワード、会社名、契約ステータス、プラン、管理フラグ。
  - ボタン: 「検索」「リセット」。
- 詳細フィルタは `<details>` 要素を用いて折り畳み表示し、部署・役職・作成日・最終ログインの追加条件を提供する。【F:03_admin/user-management.html†L79-L111】

### 2.3 利用者一覧セクション
- 上部に CSV 出力・新規アカウント作成ボタンを並列配置する。【F:03_admin/user-management.html†L114-L130】
- テーブルは10列構成とし、最右列に操作ボタン群（詳細、権限変更、パスワード初期化等）を配置する。【F:03_admin/user-management.html†L131-L178】
- 行ホバー時には背景色を `bg-surface-variant/60` に変更し、クリック操作に備える。

---

## 3. 機能要件

### 3.1 検索条件
- キーワードは氏名・メール・アカウントIDを対象とする。
- 契約ステータス、プラン、管理フラグはドロップダウン選択で複数選択は不可。
- 詳細フィルタの「作成日」は開始・終了の2入力をまとめて扱い、リセット時に空へ戻す。
- 「保存済み条件」ボタンは将来的にモーダルを開く想定で、初期リリースではイベントログのみを記録する。

### 3.2 一覧テーブル
- 列の表示順はモック通りとし、アカウントIDは等幅フォントで表示する。
- 停止フラグ・管理フラグはラベル表示とし、色分けされたステータスタグを使用する。
- 操作列には「詳細」「権限変更」「アカウント停止」「削除」を配置し、行データに応じてラベルを切り替えられるようにする。

### 3.3 CSV 出力 / 新規作成
- CSV 出力ボタンは検索条件に基づくエクスポートを実行する API を呼び出す想定。
- 「新規アカウント作成」ボタンはモーダルまたは別画面へ遷移する。初期リリースでは `/admin/user-create` へのリンクにする。

---

## 4. データモデル（例）
```json
{
  "filters": {
    "keyword": "田中",
    "company": "株式会社アブロード",
    "contractStatus": "active",
    "plan": "pro",
    "flag": "attention"
  },
  "users": [
    {
      "accountId": "USR-0001284",
      "company": "株式会社アブロード",
      "departmentRole": "マーケティング部 / マネージャー",
      "name": "田中 太郎",
      "email": "t.tanaka@example.com",
      "statusTag": "有効",
      "flagTag": "要注意",
      "plan": "Pro (年間)",
      "lastLogin": "2025-09-30T11:32:00+09:00"
    }
  ]
}
```

---

## 5. 非機能要件
- 検索のレスポンスは 2 秒以内を目標とする。
- テーブルは最大 1000 件までページングで表示し、1ページ 50 件が上限。
- フォーム要素にはスクリーンリーダー用ラベルを設定し、`aria-label` を不足なく付与する。

---

## 6. 将来検討事項
- 検索条件の保存・共有機能（部門単位でのプリセット管理）。
- 列ごとのソート機能追加とデフォルト並び順の設定。
- 一覧上でのインライン編集（MFA必須の切替など）。
