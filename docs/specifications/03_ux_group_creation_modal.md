# UXドキュメント: グループ新規作成モーダル

## 1. 概要

このドキュメントは、「SpeedAd - アンケート管理ダッシュボード」におけるグループ新規作成モーダル（`newGroupModal`）のユーザーエクスペリエンス（UX）について定義します。ユーザーが新しいグループを効率的かつ直感的に作成できるよう、以下のUX原則と具体的な実装仕様に基づき設計されています。

## 2. UX原則と実装仕様

### 2.1. 視認性と集中 (Visibility & Focus)

- **目的**: ユーザーの注意をモーダル内のタスクに集中させ、迷いなく操作を開始できるようにする。
- **実装仕様**:
    - **トリガー**: サイドバーの「グループ新規作成」ボタン (`#create-group-btn`) クリックでモーダルが起動する。
    - **表示効果**: モーダル表示時、背景が半透明のスクリム (`rgba(0, 0, 0, 0.5)`) で覆われる。モーダル自体は画面中央にスケールアップしながら表示される (`transform: scale(0.95)` -> `scale(1)`)。
    - **フォーカス管理**: モーダルが開くと、最初の入力フィールドである「グループ名」 (`#groupName`) に自動的にフォーカスが当たる。

### 2.2. 直感的なフォーム入力 (Intuitive Form Input)

- **目的**: ユーザーがストレスなく、正確に情報を入力できるようにする。
- **実装仕様**:
    - **Raised Label**: 各入力フィールド（グループ名、説明）は「Raised Label」スタイルを採用。入力中にラベルがフィールド上部に移動し、常に見える状態を維持する。
    - **視覚的フィードバック**: フォーカス時には、ラベルと入力欄の枠線の色がプライマリカラー (`var(--color-primary)`) に変わり、`3px` の同色の `box-shadow` が表示される。

### 2.3. 効率的なメンバー管理 (Efficient Member Management)

- **目的**: 複数のメンバーを簡単に追加・管理できるようにし、操作の即時性を確保する。
- **実装仕様**:
    - **入力後の挙動**: メールアドレスと役割を入力し「追加」ボタン (`#add-member-btn`) をクリックすると、メンバーがリストに追加された後、メールアドレスと役割の入力フィールドはクリアされ、フォーカスはメールアドレス入力フィールドに自動で戻る。これにより、連続したメンバー追加が容易になる。
    - **リスト表示**: 追加されたメンバーは、メールアドレスと役割（管理者/一般メンバー）がタグ形式で明確に表示されたリストで一覧できる。
    - **削除時の確認**: 各メンバーの横にある削除アイコン (`<i class="bi bi-x-circle"></i>`) をクリックすると、「{email} をリストから削除しますか？」という確認ダイアログが表示され、誤操作を防ぐ。「OK」をクリックすると削除が実行される。
    - **フィードバック**: 
        - 追加成功時: 「{email} を追加しました。」という成功タイプのトースト通知を2秒間表示。
        - 削除成功時: 「{email} を削除しました。」という情報タイプのトースト通知を2秒間表示。
    - **空の状態**: メンバーが一人もいない場合は、「メンバーを追加してください。」というメッセージがリストエリアに表示される。

### 2.4. 適切なエラーハンドリングとフィードバック (Effective Error Handling & Feedback)

- **目的**: ユーザーがエラーに遭遇した際に、迅速かつ正確に問題を特定し、解決できるように導く。
- **実装仕様**:
    - **リアルタイムバリデーション**: 入力エラーは、フォーカスがフィールドから外れた瞬間に検出される。
    - **視覚的エラー表示**: エラーが発生したフィールドは、ボーダー色がエラーカラー (`var(--color-danger)`) に変更され、同色の `box-shadow` が表示される。
    - **エラーメッセージ定義**:
        | エラー条件 | フィールド | メッセージ |
        | :--- | :--- | :--- |
        | 未入力 | グループ名 | 「グループ名は必須項目です。」 |
        | 未入力 | メールアドレス | 「メールアドレスを入力してください。」 |
        | 形式不正 | メールアドレス | 「有効なメールアドレス形式で入力してください。」 |
        | 重複追加 | メールアドレス | 「このメンバーは既に追加されています。」 |
    - **ボタンの状態**: モーダル内にバリデーションエラーが1つでも存在する場合、「作成する」ボタン (`#submit-group-btn`) は `disabled` 状態になる。すべてのエラーが解消されると、ボタンは再び有効になる。

### 2.5. スムーズな操作完了 (Seamless Completion)

- **目的**: ユーザーがタスクを完了した際に、その成功を明確に認識し、次の行動にスムーズに移行できるようにする。
- **実装仕様**:
    - **成功時**: 「作成する」ボタンクリック後、API通信が成功すると、「グループ「{グループ名}」が新規作成されました！」という成功タイプのトースト通知が3秒間表示され、モーダルはフェードアウトしながら閉じる。
    - **失敗時 (APIエラー)**: API通信が失敗した場合は、「グループの作成に失敗しました。時間をおいて再度お試しください。」というエラータイプのトースト通知が5秒間表示される。モーダルは閉じず、ユーザーは再試行が可能。
    - **中断**: Escキーを押すか、モーダル外のスクリム部分をクリックすることで、いつでもモーダルを閉じることができる。

## 3. 考慮事項 (変更なし)

...(既存の記述を維持)...