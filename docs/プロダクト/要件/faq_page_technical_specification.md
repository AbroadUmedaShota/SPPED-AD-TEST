# FAQページ 詳細設計仕様書

---

## 1. 基本情報

### 1.1. 改訂履歴
| バージョン | 日付       | 作成者 | 変更内容 |
| :--- | :--- | :--- | :--- |
| 1.0.0    | 2025-11-07 | Gemini | 初版作成 |
| 1.1.0    | 2025-11-07 | Gemini | ユーザーフィードバック機能をスコープイン。CMS、多言語対応をスコープアウト。 |

### 1.2. ドキュメントの目的と対象読者
本書は、SPEED ADサービスに導入する「よくある質問（FAQ）」ページの実装に関する、すべての技術的・非技術的仕様を網羅的に定義することを目的とする。

**対象読者:**
- プロジェクトマネージャー
- UI/UXデザイナー
- フロントエンドエンジニア
- QAエンジニア

### 1.3. 関連ドキュメントリンク
- [要件定義書](./faq_page_requirements.md)

### 1.4. 用語定義
| 用語 | 説明 |
| :--- | :--- |
| FAQ | Frequently Asked Questions（よくある質問）の略。 |
| アコーディオン | クリックすることでコンテンツを開閉表示するUIコンポーネント。 |
| インクリメンタルサーチ | ユーザーの入力中に、リアルタイムで検索結果を更新・表示する検索方式。 |
| ディープリンク | 特定のコンテンツ（この場合は特定のQ&A）を直接参照できるURL。 |

---

## 2. 機能仕様

### 2.1. 機能概要（ユーザーストーリー形式）
- **ペルソナ:** SPEED ADのサービス利用者
- **ストーリー:** サービスを利用していて不明点が発生した際、問い合わせをすることなく、迅速かつ簡単に自己解決したい。そのために、よくある質問とその回答がまとめられたページを閲覧し、キーワードで情報を検索したり、カテゴリから質問を探したりすることができる。また、回答の品質向上のため、各回答が役に立ったかをフィードバックすることができる。

### 2.2. 機能一覧（優先度付き）
本仕様書で定義する機能の優先度は、すべて「**P0（高）：必須実装**」とする。

| ID | 機能名 | 概要 |
| :--- | :--- | :--- |
| F-01 | Q&Aカテゴリ表示 | Q&Aを内容に応じたカテゴリに分類し、グループ化して表示する。 |
| F-02 | アコーディオン表示 | 質問をクリックすると回答が展開されるUIを提供する。一度に開ける回答は一つだけとする。 |
| F-03 | キーワード検索 | ページ内のQ&A（質問・回答文）を対象にキーワード検索を行い、結果を絞り込んで表示する。 |
| F-04 | 注目コンテンツ表示 | 特に重要なQ&Aを「注目の質問」としてページ上部に表示する。 |
| F-05 | レスポンシブ対応 | PC、タブレット、スマートフォンなど、あらゆるデバイスで最適化された表示を行う。 |
| F-06 | ユーザーフィードバック | 各回答が役に立ったかどうかをユーザーが評価できる機能。 |

### 2.3. スコープ（本開発に含むこと・含まないこと）

#### 含むこと
- 本仕様書で定義されたFAQページのフロントエンド実装すべて。
- Q&Aコンテンツを定義するJSONファイルの構造設計とサンプルデータ作成。
- 既存の共通コンポーネント（ヘッダー、フッター等）の流用。
- ユーザーフィードバック機能の実装（評価はGoogle Analyticsのカスタムイベントとして記録）。

#### 含まないこと
- Q&Aコンテンツを管理するための管理画面（CMS）の開発。
- アクセス解析等と連携した「注目の質問」の動的な自動更新機能。
- フィードバック結果を画面上に表示・集計する機能。
- 多言語対応。

---

## 3. アーキテクチャ

### 3.1. コンポーネント設計
(変更なし)

#### 3.1.2. 各コンポーネントの責務
| コンポーネント名 | Props | State (内部状態) |責務・役割 |
| :--- | :--- | :--- | :--- |
| **FaqPage** | (変更なし) | (変更なし) | (変更なし) |
| **SearchBox** | (変更なし) | (変更なし) | (変更なし) |
| **FeaturedQuestions** | (変更なし) | - | (変更なし) |
| **CategoryList** | (変更なし) | - | (変更なし) |
| **CategoryItem** | (変更なし) | - | (変更なし) |
| **QuestionList** | (変更なし) | - | (変更なし) |
| **QuestionItem** | `question` (object)<br>`isOpen` (boolean)<br>`onClick` (function)<br>**`onFeedback` (function)** | `isFeedbackSent` (boolean) | ・単一の質問と回答をアコーディオンUIで表示する。<br>・クリックイベントを親に通知する。<br>・**フィードバックUIを表示し、評価イベントを親に通知する。** |

### 3.2. データフローと状態管理

#### 3.2.1. 状態一覧
| 状態名 | 型 | 管理場所 | 説明 |
| :--- | :--- | :--- | :--- |
| `allData` | Object | FaqPage | (変更なし) |
| `isLoading` | boolean | FaqPage | (変更なし) |
| `error` | Object/null | FaqPage | (変更なし) |
| `searchTerm` | string | FaqPage | (変更なし) |
| `activeQuestionId` | string/null | FaqPage | (変更なし) |
| **`feedbackStatus`** | **Object** | **`localStorage` & FaqPage** | **各質問IDに対するフィードバック送信済み状態を管理するオブジェクト `{ <questionId>: true }`。`localStorage`で永続化する。** |

(以下、変更なし)

---

## 4. UI/UX詳細仕様

(4.1, 4.2.1, 4.2.2は変更なし)

#### 4.2.3. フィードバックUI
- 各回答の末尾に「この回答は役に立ちましたか？」というテキストと、[はい] [いいえ] の2つのボタンを配置する。
- いずれかのボタンをクリックすると、ボタン群は「ご協力ありがとうございました。」というテキストに置き換わる。
- 一度クリックした評価は変更できない。この状態は `localStorage` を利用して、ページをリロードしても維持される。

(4.3は変更なし)

---

## 8. テスト計画

(8.1は変更なし)

### 8.2. 結合テスト観点
| 対象機能 | テスト項目 |
| :--- | :--- |
| **検索機能** | (変更なし) |
| **アコーディオン機能**| (変更なし) |
| **ディープリンク機能**| (変更なし) |
| **フィードバック機能** | **・[はい]ボタンクリックで、質問IDと`useful`の評価を持つGAイベントが送信されること。<br>・[いいえ]ボタンクリックで、質問IDと`not-useful`の評価を持つGAイベントが送信されること。<br>・クリック後にボタンがメッセージに置き換わり、再度クリックできないこと。<br>・リロード後もメッセージが表示されたままであること。** |

(8.3は変更なし)

---

## 9. 将来の拡張性

### 9.1. フィードバックデータの活用
- **将来像:** 今回の実装ではGoogle Analyticsに送信するフィードバックデータを集計し、「役に立たなかった」評価が多いQ&Aを特定し、コンテンツ改善に繋げる。将来的には、その結果をダッシュボードなどで可視化する機能を開発する可能性がある。
- **今回の考慮事項:** Google Analyticsに送信するカスタムイベントのカテゴリ、アクション、ラベルを、後から集計しやすいように命名規則を定めて設計する。（例: `category: 'FAQ', action: 'Feedback', label: '<QuestionID> - useful'`）