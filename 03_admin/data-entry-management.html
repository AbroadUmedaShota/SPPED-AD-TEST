<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpeedAd - 照合管理</title>
    <link rel="icon" href="../02_dashboard/assets/svg/speedad_logo.svg" type="image/svg+xml">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../02_dashboard/service-top-style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="src/admin-style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Inter%3Awght%40400%3B500%3B700%3B900&family=Noto+Sans+JP%3Awght%40400%3B500%3B700%3B900" onload="this.rel='stylesheet'" rel="stylesheet">
    <style>
        .sortable-header {
            cursor: pointer;
        }
        .sortable-header .sort-icon {
            vertical-align: middle;
        }
    </style>
</head>
<body class="bg-background text-on-background">
<div class="relative flex min-h-screen flex-col overflow-x-hidden">
    <div id="mobileSidebarOverlay" class="mobile-sidebar-overlay lg:hidden"></div>
    <div id="header-placeholder"></div>
    <div class="flex flex-1 pt-16 bg-background">
        <div id="sidebar-placeholder"></div>
        <main class="flex flex-1 flex-col py-8 px-4 sm:px-6 lg:px-8" id="main-content">
            <div class="flex flex-col w-full max-w-6xl mx-auto flex-1">
                <div id="breadcrumb-container" class="mb-4"></div>
                <div class="flex flex-wrap justify-between items-center gap-4 mb-6 pb-4 border-b border-outline-variant">
                    <h1 class="text-on-background text-headline-large font-bold leading-tight tracking-tight">照合管理</h1>
                    <div class="flex items-center gap-2"><span class="text-sm text-on-surface-variant">最終更新 2025/09/30 12:05</span><button class="inline-flex items-center gap-1 rounded-lg border border-outline px-3 py-2 text-sm"><span class="material-icons text-base">rule</span>一致判定ルール</button></div>
                </div>
                <section class="space-y-6">
    <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
        <div class="rounded-xl border border-outline-variant bg-surface p-5 shadow-sm">
            <p class="text-sm text-on-surface-variant">総件数</p>
            <p class="text-display-small font-bold text-on-surface">1,240</p>
            <p class="text-xs text-on-surface-variant mt-2">前日比 +3%</p>
        </div>
        <div class="rounded-xl border border-outline-variant bg-surface p-5 shadow-sm">
            <p class="text-sm text-on-surface-variant">エスカレーション</p>
            <p class="text-display-small font-bold text-error">18</p>
            <p class="text-xs text-on-surface-variant mt-2">要管理者対応</p>
        </div>
        <div class="rounded-xl border border-outline-variant bg-surface p-5 shadow-sm">
            <p class="text-sm text-on-surface-variant">ロック中</p>
            <p class="text-display-small font-bold text-warning">12</p>
            <p class="text-xs text-on-surface-variant mt-2">タイムアウト監視中</p>
        </div>
        <div class="rounded-xl border border-outline-variant bg-surface p-5 shadow-sm">
            <p class="text-sm text-on-surface-variant">当日完了</p>
            <p class="text-display-small font-bold text-success">84</p>
            <p class="text-xs text-on-surface-variant mt-2">前年比 +12%</p>
        </div>
    </div>
    <div class="bg-surface rounded-xl border border-outline-variant p-6 shadow-sm">
        <div class="flex flex-wrap justify-between items-center gap-3 mb-4">
            <h2 class="text-title-large font-semibold text-on-surface">優先度別キュー</h2>
            <div class="flex items-center gap-2 text-sm">
                <button class="inline-flex items-center gap-1 rounded-lg border border-outline px-3 py-2">
                    <span class="material-icons text-base">refresh</span>
                    最新化
                </button>
                <button class="inline-flex items-center gap-1 rounded-lg border border-outline px-3 py-2">
                    <span class="material-icons text-base">download</span>
                    CSV出力
                </button>
            </div>
        </div>
        <div class="grid gap-4 md:grid-cols-2">
            <section class="rounded-lg border border-outline-variant/60 bg-surface-variant/30 p-4" aria-label="優先度リスト">
                <h3 class="text-title-medium font-semibold text-on-surface mb-3">優先度キュー</h3>
                <ul class="space-y-3 text-sm text-on-surface-variant">
                    <li class="flex items-center justify-between">
                        <span class="inline-flex items-center gap-2"><span class="size-2 rounded-full bg-error"></span>オンデマンド</span>
                        <span class="text-on-surface font-semibold">24件</span>
                    </li>
                    <li class="flex items-center justify-between">
                        <span class="inline-flex items-center gap-2"><span class="size-2 rounded-full bg-warning"></span>超特急</span>
                        <span class="text-on-surface font-semibold">38件</span>
                    </li>
                    <li class="flex items-center justify-between">
                        <span class="inline-flex items-center gap-2"><span class="size-2 rounded-full bg-secondary"></span>特急</span>
                        <span class="text-on-surface font-semibold">66件</span>
                    </li>
                    <li class="flex items-center justify-between">
                        <span class="inline-flex items-center gap-2"><span class="size-2 rounded-full bg-success"></span>通常</span>
                        <span class="text-on-surface font-semibold">144件</span>
                    </li>
                </ul>
            </section>
            <section class="rounded-lg border border-outline-variant/60 bg-surface-variant/30 p-4" aria-label="グループ残タスク">
                <h3 class="text-title-medium font-semibold text-on-surface mb-3">グループ別残タスク</h3>
                <ul class="space-y-3 text-sm text-on-surface-variant">
                    <li class="flex items-center justify-between">
                        <span>展示会A (OCR併用)</span>
                        <span class="text-on-surface font-semibold">32件</span>
                    </li>
                    <li class="flex items-center justify-between">
                        <span>セミナーB (手入力優先)</span>
                        <span class="text-on-surface font-semibold">21件</span>
                    </li>
                    <li class="flex items-center justify-between">
                        <span>キャンペーンC</span>
                        <span class="text-on-surface font-semibold">48件</span>
                    </li>
                </ul>
            </section>
        </div>
    </div>
    <div class="bg-surface rounded-xl border border-outline-variant p-6 shadow-sm">
        <h2 class="text-title-large font-semibold text-on-surface mb-4">アンケート一覧</h2>

        <!-- 絞り込み機能 -->
        <div class="bg-surface p-4 rounded-xl mb-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 items-end">
                <!-- キーワード検索 -->
                <div class="input-group lg:col-span-1 relative">
                    <input type="search" id="keyword-search" placeholder=" " class="input-field pl-10 pr-4 w-full">
                    <label for="keyword-search" class="input-label">キーワードで検索</label>
                    <span class="material-icons absolute left-3 top-1/2 -translate-y-1/2 text-on-surface-variant text-xl pointer-events-none">search</span>
                </div>

                <!-- ステータスフィルター -->
                <div class="input-group lg:col-span-1">
                    <select id="status-filter" class="input-field w-full">
                        <option>すべて</option>
                        <option>会期前</option>
                        <option>会期中</option>
                        <option>会期中オンデマンド</option>
                        <option>会期終了（データ化無し）</option>
                        <option>会期終了（データ化中）</option>
                        <option>会期終了（照合待ち）</option>
                        <option>エスカレ有</option>
                    </select>
                    <label for="status-filter" class="input-label">ステータス</label>
                </div>

                <!-- 期間フィルター -->
                <div class="flex items-center gap-2 lg:col-span-1">
                    <div id="startDatePickerWrapper" class="input-group flex-1 relative">
                        <input type="text" id="start-date-filter" class="input-field pr-10" placeholder=" " readonly data-input>
                        <label for="start-date-filter" class="input-label">開始日</label>
                        <button type="button" class="absolute right-3 top-1/2 -translate-y-1/2 text-on-surface-variant hover:text-primary transition-colors" data-toggle>
                            <span class="material-icons text-xl">calendar_today</span>
                        </button>
                    </div>
                    <span class="text-on-surface-variant">～</span>
                    <div id="endDatePickerWrapper" class="input-group flex-1 relative">
                        <input type="text" id="end-date-filter" class="input-field pr-10" placeholder=" " readonly data-input>
                        <label for="end-date-filter" class="input-label">終了日</label>
                        <button type="button" class="absolute right-3 top-1/2 -translate-y-1/2 text-on-surface-variant hover:text-primary transition-colors" data-toggle>
                            <span class="material-icons text-xl">calendar_today</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="flex justify-end mt-4">
                <button id="resetFiltersButton" class="inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-normal text-on-surface-variant transition-colors hover:text-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40" aria-label="フィルターをリセット">
                    フィルターをリセット
                </button>
            </div>
        </div>

        <!-- レコードテーブル -->
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-outline-variant text-sm">
                <thead class="bg-surface-variant text-on-surface-variant text-xs uppercase">
                    <tr>
                        <th class="px-4 py-3 text-left sortable-header" data-sort-key="name">アンケート名<span class="sort-icon material-icons text-base ml-1">unfold_more</span></th>
                        <th class="px-4 py-3 text-left sortable-header" data-sort-key="status">ステータス<span class="sort-icon material-icons text-base ml-1">unfold_more</span></th>
                        <th class="px-4 py-3 text-left sortable-header" data-sort-key="periodEnd">納品期日<span class="sort-icon material-icons text-base ml-1">unfold_more</span></th>
                        <th class="px-4 py-3 text-left sortable-header" data-sort-key="option">オプション<span class="sort-icon material-icons text-base ml-1">unfold_more</span></th>
                        <th class="px-4 py-3 text-left">総件数</th>
                        <th class="px-4 py-3 text-left">一致</th>
                        <th class="px-4 py-3 text-left">不一致</th>
                        <th class="px-4 py-3 text-left">進捗</th>
                        <th class="px-4 py-3 text-left">操作</th>
                    </tr>
                </thead>
                <tbody id="reconciliation-table-body" class="divide-y divide-outline-variant">
                    <!-- JSで動的に挿入 -->
                </tbody>
            </table>
        </div>

        <!-- ページネーション -->
        <div class="flex flex-wrap items-center justify-between gap-4 py-4 px-2 text-on-surface-variant text-sm">
            <div class="flex items-center gap-2">
                <label for="rows-per-page" class="whitespace-nowrap">表示件数:</label>
                <select id="rows-per-page" class="py-1 px-2 rounded-md border border-outline-variant bg-surface-bright text-on-surface-variant appearance-none" aria-label="1ページあたりの表示件数">
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                </select>
            </div>
            <div id="reconciliation-pagination" class="flex items-center gap-2">
                <button class="p-1 rounded-full hover:bg-surface-variant transition-colors disabled:opacity-50 disabled:cursor-not-allowed" title="前へ" id="prevPageBtn" aria-label="前のページへ"><span class="material-icons text-lg">chevron_left</span></button>
                <div id="pagination-numbers" class="flex items-center gap-1">
                    <!-- JSで動的に挿入 -->
                </div>
                <button class="p-1 rounded-full hover:bg-surface-variant transition-colors disabled:opacity-50 disabled:cursor-not-allowed" title="次へ" id="nextPageBtn" aria-label="次のページへ"><span class="material-icons text-lg">chevron_right</span></button>
            </div>
            <div id="pageInfo" class="font-medium min-w-[120px] text-right">
                <!-- JSで動的に挿入 -->
            </div>
        </div>
    </div>


</section>

            </div>
        </main>
    </div>
    <div id="footer-placeholder"></div>
</div>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
<script type="module" src="src/admin.js"></script>
<script type="module" src="src/data-entry-management.js"></script>
</body>
</html>
