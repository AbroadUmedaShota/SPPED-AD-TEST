<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpeedAd - Âñ∂Ê•≠Êó•„Ç´„É¨„É≥„ÉÄ„ÉºÁÆ°ÁêÜ</title>
    <link rel="icon" href="../02_dashboard/assets/svg/speedad_logo.svg" type="image/svg+xml">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../02_dashboard/service-top-style.css">
    <link rel="stylesheet" href="src/admin-style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Inter%3Awght%40400%3B500%3B700%3B900&family=Noto+Sans+JP%3Awght%40400%3B500%3B700%3B900" onload="this.rel='stylesheet'" rel="stylesheet">
</head>
<body class="bg-background text-on-background">
<div class="relative flex min-h-screen flex-col overflow-x-hidden">
    <div id="mobileSidebarOverlay" class="mobile-sidebar-overlay lg:hidden"></div>
    <div id="header-placeholder"></div>
    <div class="flex flex-1 pt-16 bg-background">
        <div id="sidebar-placeholder"></div>
        <main class="flex flex-1 flex-col py-8 px-4 sm:px-6 lg:px-8" id="main-content">
            <div class="flex flex-col w-full max-w-6xl mx-auto flex-1">
                <div id="breadcrumb-container" class="mb-4"></div>
                <div class="flex flex-wrap justify-between items-center gap-4 mb-6 pb-4 border-b border-outline-variant">
                    <h1 class="text-on-background text-headline-large font-bold leading-tight tracking-tight">Âñ∂Ê•≠Êó•„Ç´„É¨„É≥„ÉÄ„ÉºÁÆ°ÁêÜ</h1>
                    <div class="flex items-center gap-2">
                        <button id="export-csv-button" class="inline-flex items-center gap-1 rounded-lg border border-outline px-4 py-2 text-sm"><span class="material-icons text-base">download</span>„Ç´„É¨„É≥„ÉÄ„ÉºCSVÂá∫Âäõ</button>
                        <button id="import-csv-button" class="inline-flex items-center gap-1 rounded-lg border border-outline px-4 py-2 text-sm"><span class="material-icons text-base">upload_file</span>‰ºëÊ•≠Êó•CSVÂèñËæº</button>
                    </div>
                </div>
                <section class="space-y-6">
                    <div class="bg-surface rounded-xl border border-outline-variant p-6 shadow-sm">
                        <div class="flex flex-wrap justify-between items-center gap-4">
                            <div>
                                <h2 class="text-title-large font-semibold text-on-surface">Âñ∂Ê•≠Êó•„É´„Éº„É´</h2>
                                <p class="text-sm text-on-surface-variant">Á•ùÊó•API„ÅßÂèñÂæó„Åó„Åü‰ºëÊó• + ÂÄãÂà•Ë®≠ÂÆö„ÅÆ‰ºëÊ•≠Êó•„ÇíÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ</p>
                            </div>
                            <div class="flex items-center gap-2 text-sm">
                                <button id="sync-holidays-button" class="inline-flex items-center gap-1 rounded-lg border border-outline px-3 py-2">
                                    <span class="material-icons text-base">cloud_sync</span>
                                    Á•ùÊó•APIÂêåÊúü
                                </button>
                                <button id="add-setting-button" class="inline-flex items-center gap-1 rounded-lg bg-secondary text-secondary-on px-3 py-2 font-semibold">
                                    <span class="material-icons text-base">add</span>
                                    ‰ºëÊ•≠Êó•„ÇíËøΩÂä†
                                </button>
                            </div>
                        </div>
                        <div id="kpi-summary-container" class="mt-6 grid gap-4 sm:grid-cols-3">
                            <div class="rounded-lg bg-surface-container-low p-4">
                                <p class="text-on-surface-variant text-sm">‰ºëÊ•≠Êó•Êï∞ (‰ªäÊúà)</p>
                                <p id="kpi-holidays" class="text-title-large font-semibold text-on-surface">-</p>
                            </div>
                            <div class="rounded-lg bg-surface-container-low p-4">
                                <p class="text-on-surface-variant text-sm">ÊåØÊõøÂñ∂Ê•≠Êó•</p>
                                <p id="kpi-substitute-workdays" class="text-title-large font-semibold text-on-surface">-</p>
                            </div>
                            <div class="rounded-lg bg-surface-container-low p-4">
                                <p class="text-on-surface-variant text-sm">SLAÊúüÈôêÈñìËøë„ÅÆÊ°à‰ª∂Êï∞</p>
                                <p id="kpi-sla-alerts" class="text-title-large font-semibold text-warning">-</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-surface rounded-xl border border-outline-variant p-6 shadow-sm">
                        <div class="flex flex-wrap justify-between items-center gap-3 mb-4">
                            <div class="flex items-center gap-2">
                                <button id="prev-month-button" class="inline-flex items-center justify-center rounded-full border border-outline size-10" aria-label="ÂâçÊúà„Å∏">
                                    <span class="material-icons">chevron_left</span>
                                </button>
                                <h2 id="calendar-title" class="text-title-large font-semibold text-on-surface w-32 text-center">-</h2>
                                <button id="next-month-button" class="inline-flex items-center justify-center rounded-full border border-outline size-10" aria-label="ÁøåÊúà„Å∏">
                                    <span class="material-icons">chevron_right</span>
                                </button>
                            </div>
                                                            <div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-on-surface-variant">
                                <span class="inline-flex items-center gap-1">‚ö°: „Ç™„É≥„Éá„Éû„É≥„Éâ</span>
                                <span class="inline-flex items-center gap-1">‚≠ê: ÈÄöÂ∏∏</span>
                                <span class="inline-flex items-center gap-1">üìå: „É°„É¢„ÅÇ„Çä</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-end gap-2 mb-4">
                            <button id="view-monthly-button" class="calendar-view-button p-2 rounded-full bg-primary-container text-on-primary-container" aria-label="ÊúàË°®Á§∫">
                                <span class="material-icons">calendar_month</span>
                            </button>
                            <button id="view-vertical-button" class="calendar-view-button p-2 rounded-full hover:bg-surface-container" aria-label="Á∏¶Ë°®Á§∫">
                                <span class="material-icons">view_day</span>
                            </button>
                            <button id="view-yearly-button" class="calendar-view-button p-2 rounded-full hover:bg-surface-container" aria-label="Âπ¥Ë°®Á§∫">
                                <span class="material-icons">calendar_today</span>
                            </button>
                        </div>
                        <div id="monthly-view">
                            <div class="grid grid-cols-7 text-sm text-center font-medium text-on-surface-variant">
                                <div class="py-2">Êó•</div>
                                <div class="py-2">Êúà</div>
                                <div class="py-2">ÁÅ´</div>
                                <div class="py-2">Ê∞¥</div>
                                <div class="py-2">Êú®</div>
                                <div class="py-2">Èáë</div>
                                <div class="py-2">Âúü</div>
                            </div>
                            <div id="calendar-grid" class="grid grid-cols-7 gap-1 text-sm text-on-surface-variant">
                                <!-- Calendar days will be injected here by JavaScript -->
                            </div>
                        </div>

                        <!-- Yearly View -->
                        <div id="yearly-view" class="hidden">
                            <!-- Yearly calendar will be injected here -->
                        </div>

                        <!-- Vertical View -->
                        <div id="vertical-view" class="hidden">
                            <!-- Vertical calendar will be injected here -->
                        </div>
                    </div>
                    <section class="grid gap-6 md:grid-cols-2">
                        <div class="bg-surface rounded-xl border border-outline-variant p-6 shadow-sm flex flex-col h-96" aria-label="‰ºëÊ•≠Êó•‰∏ÄË¶ß">
                            <div class="flex justify-between items-center mb-4 flex-shrink-0">
                                <h2 class="text-title-large font-semibold text-on-surface">‰ºëÊ•≠Êó•„ÅÆÂÄãÂà•Ë®≠ÂÆö</h2>
                                <div class="flex items-center gap-2">
                                    <button id="setting-prev-button" class="inline-flex items-center justify-center rounded-full border border-outline size-8" aria-label="Ââç„ÅÆ„Éö„Éº„Ç∏„Å∏"><span class="material-icons text-base">chevron_left</span></button>
                                    <span id="setting-page-info" class="text-sm">-</span>
                                    <button id="setting-next-button" class="inline-flex items-center justify-center rounded-full border border-outline size-8" aria-label="Ê¨°„ÅÆ„Éö„Éº„Ç∏„Å∏"><span class="material-icons text-base">chevron_right</span></button>
                                </div>
                            </div>
                            <ul id="manual-settings-list" class="space-y-2 text-sm text-on-surface-variant flex-grow min-h-0 overflow-y-auto pr-2">
                                <!-- Manual settings will be injected here by JavaScript -->
                            </ul>
                        </div>
                        <div class="bg-surface rounded-xl border border-outline-variant p-6 shadow-sm flex flex-col h-96" aria-label="Êìç‰Ωú„É≠„Ç∞">
                            <div class="flex justify-between items-center mb-4 flex-shrink-0">
                                <h2 class="text-title-large font-semibold text-on-surface">Êõ¥Êñ∞„É≠„Ç∞</h2>
                                <div class="flex items-center gap-2">
                                    <button id="log-prev-button" class="inline-flex items-center justify-center rounded-full border border-outline size-8" aria-label="Ââç„ÅÆ„Éö„Éº„Ç∏„Å∏"><span class="material-icons text-base">chevron_left</span></button>
                                    <span id="log-page-info" class="text-sm">-</span>
                                    <button id="log-next-button" class="inline-flex items-center justify-center rounded-full border border-outline size-8" aria-label="Ê¨°„ÅÆ„Éö„Éº„Ç∏„Å∏"><span class="material-icons text-base">chevron_right</span></button>
                                </div>
                            </div>
                            <ol id="update-log-list" class="space-y-2 text-sm text-on-surface-variant flex-grow min-h-0 overflow-y-auto pr-2">
                                <!-- Update logs will be injected here by JavaScript -->
                            </ol>
                        </div>
                    </section>
                </section>
            </div>
        </main>

        <!-- Focus Area -->
        <aside id="focus-area" class="fixed top-0 right-0 z-50 h-screen w-full max-w-md transform translate-x-full transition-transform duration-300 ease-in-out bg-surface border-l border-outline-variant shadow-2xl flex flex-col" aria-labelledby="focus-area-title">
            <!-- Close Tab Button -->
            <button id="focus-area-close-tab" class="absolute -left-12 top-5 bg-surface border border-r-0 border-outline-variant rounded-l-lg p-2 shadow-lg hover:bg-surface-variant focus:outline-none ring-2 ring-primary focus:ring-offset-2 hidden">
                <span class="material-icons">chevron_right</span>
            </button>

            <!-- Focus Area Header -->
            <div class="flex items-center justify-between p-4 border-b border-outline-variant flex-shrink-0">
                <div id="focus-area-header">
                    <h2 id="focus-area-title" class="text-title-large font-semibold text-on-surface">Ë©≥Á¥∞</h2>
                    <p id="focus-area-date" class="text-sm text-on-surface-variant"></p>
                </div>
            </div>

            <!-- Focus Area Content -->
            <div class="flex-grow flex flex-col">
                <!-- Tab Headers -->
                <div class="border-b border-outline-variant flex-shrink-0">
                    <nav class="-mb-px flex space-x-4 px-6" aria-label="Tabs">
                        <button data-tab="details" class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-primary text-primary">
                            „Ç¢„É≥„Ç±„Éº„ÉàË©≥Á¥∞
                        </button>
                        <button data-tab="assign" class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-on-surface-variant hover:text-on-surface hover:border-outline">
                            „Ç¢„Çµ„Ç§„É≥
                        </button>
                        <button data-tab="settings" class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-on-surface-variant hover:text-on-surface hover:border-outline">
                            ÂÄãÂà•Ë®≠ÂÆö
                        </button>
                    </nav>
                </div>

                <!-- Tab Panels -->
                <div class="flex-grow overflow-y-auto">
                    <!-- Details & Memo Panel -->
                    <div id="tab-panel-details" class="tab-panel p-6 space-y-6">
                        <section aria-labelledby="focus-details-title">
                            <h3 id="focus-details-title" class="text-title-medium font-semibold text-on-surface mb-3">„Ç¢„É≥„Ç±„Éº„ÉàË©≥Á¥∞</h3>
                            <div id="focus-details-content" class="space-y-2">
                                <!-- Survey details will be injected here -->
                            </div>
                        </section>
                        <section aria-labelledby="focus-memo-title">
                            <div class="flex items-center gap-2 mb-3">
                                <span class="material-icons text-on-surface-variant">edit_note</span>
                                <h3 id="focus-memo-title" class="text-title-medium font-semibold text-on-surface">„É°„É¢</h3>
                            </div>
                            <div id="focus-memo-content">
                                <textarea id="memo-textarea" rows="4" class="w-full rounded-md border-outline bg-surface-container-lowest focus:border-primary focus:ring-primary" placeholder="„Åì„ÅÆÊó•„ÅÆ„É°„É¢„ÇíÂÖ•Âäõ..."></textarea>
                                <div class="text-right mt-2">
                                    <button id="save-memo-button" class="rounded-lg bg-primary text-on-primary px-4 py-2 text-sm font-semibold">„É°„É¢„Çí‰øùÂ≠ò</button>
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Assign Panel -->
                    <div id="tab-panel-assign" class="tab-panel p-6 hidden">
                        <section aria-labelledby="focus-assign-title">
                            <h3 id="focus-assign-title" class="text-title-medium font-semibold text-on-surface mb-3">„Ç¢„Çµ„Ç§„É≥</h3>
                            <div id="focus-assign-content" class="space-y-2">
                                <!-- Assignment content will be injected here -->
                            </div>
                        </section>
                    </div>

                    <!-- Settings Panel -->
                    <div id="tab-panel-settings" class="tab-panel p-6 hidden">
                        <section aria-labelledby="focus-settings-title">
                            <h3 id="focus-settings-title" class="text-title-medium font-semibold text-on-surface mb-3">ÂÄãÂà•Ë®≠ÂÆö</h3>
                            <div id="focus-settings-content" class="space-y-4">
                                <div>
                                    <label class="text-sm font-medium text-on-surface-variant">Á®ÆÂà•</label>
                                    <div class="flex gap-4 mt-2">
                                        <label class="flex items-center gap-2">
                                            <input type="radio" name="focus_event_type" value="HOLIDAY" class="form-radio text-primary focus:ring-primary">
                                            <span>ÁâπÂà•‰ºëÊ•≠Êó•</span>
                                        </label>
                                        <label class="flex items-center gap-2">
                                            <input type="radio" name="focus_event_type" value="SUBSTITUTE_WORKDAY" class="form-radio text-primary focus:ring-primary">
                                            <span>ÊåØÊõøÂñ∂Ê•≠Êó•</span>
                                        </label>
                                        <label class="flex items-center gap-2">
                                            <input type="radio" name="focus_event_type" value="WORKDAY" class="form-radio text-primary focus:ring-primary">
                                            <span>Ë®≠ÂÆöËß£Èô§</span>
                                        </label>
                                    </div>
                                </div>
                                <div>
                                    <label for="focus-reason" class="block text-sm font-medium text-on-surface-variant">ÁêÜÁî±</label>
                                    <textarea id="focus-reason" rows="3" class="mt-1 block w-full rounded-md border-outline bg-surface-container-lowest focus:border-primary focus:ring-primary" placeholder="ÁêÜÁî±„ÇíÂÖ•Âäõ (‰æã: Á§æÂÜÖÁ†î‰øÆ)"></textarea>
                                </div>
                                <div class="text-right mt-2">
                                    <button id="save-day-setting-button" class="rounded-lg bg-primary text-on-primary px-4 py-2 text-sm font-semibold">„Åì„ÅÆÊó•„ÅÆË®≠ÂÆö„Çí‰øùÂ≠ò</button>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </aside>
    </div>
    <div id="footer-placeholder"></div>
    <div id="calendar-tooltip" class="hidden"></div>
</div>

<!-- Delete Confirmation Modal -->
<div id="delete-confirm-modal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-50 flex items-center justify-center" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div id="delete-confirm-modal-container" class="transform opacity-0 translate-y-4 transition-all sm:max-w-lg sm:w-full bg-surface rounded-xl shadow-xl">
        <div class="bg-surface px-4 pt-5 pb-4 sm:p-6 sm:pb-4 rounded-t-xl">
            <div class="sm:flex sm:items-start">
                <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-error-container sm:mx-0 sm:h-10 sm:w-10">
                    <span class="material-icons text-error">warning</span>
                </div>
                <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                    <h3 class="text-lg leading-6 font-medium text-on-surface" id="modal-title">Ë®≠ÂÆö„ÇíÂâäÈô§</h3>
                    <div class="mt-2">
                        <p class="text-sm text-on-surface-variant">„Åì„ÅÆË®≠ÂÆö„ÇíÊú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü„Åì„ÅÆÊìç‰Ωú„ÅØÂÖÉ„Å´Êàª„Åõ„Åæ„Åõ„Çì„ÄÇ</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-surface-container-lowest px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-xl">
            <button id="confirm-delete-button" type="button" class="w-full inline-flex justify-center rounded-full border border-transparent shadow-sm px-4 py-2 bg-error text-on-error text-base font-medium hover:bg-error/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-error sm:ml-3 sm:w-auto sm:text-sm">
                ÂâäÈô§
            </button>
            <button id="cancel-delete-button" type="button" class="mt-3 w-full inline-flex justify-center rounded-full border border-outline shadow-sm px-4 py-2 bg-surface text-on-surface text-base font-medium hover:bg-surface-variant focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:w-auto sm:text-sm">
                „Ç≠„É£„É≥„Çª„É´
            </button>
        </div>
    </div>
</div>

<script type="module" src="src/admin.js"></script>
</body>
</html>